<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Visita agendada ‚Äî Repisas Don Maxi</title>
    <meta name="description" content="Confirmaci√≥n de visita agendada con Repisas Don Maxi." />
    <meta name="robots" content="noindex,nofollow,max-snippet:0" />
    <link rel="icon" href="/logo.png" />

    <meta property="og:title" content="Visita agendada ‚Äî Repisas Don Maxi" />
    <meta property="og:description" content="Tu visita fue agendada exitosamente. Recibir√°s la confirmaci√≥n en tu correo." />
    <meta property="og:image" content="/og-cover.png" />
    <meta name="theme-color" content="#FF931E" />

    <style>
      :root{
        --bg:#ffffff;
        --surface:#ffffff;
        --text:#0b1020;
        --muted:#64748b;
        --border:#e5e7eb;
        --accent:#FF931E;
        --accent-ink:#fff;
        --elev:0 10px 28px rgba(0,0,0,.08);
        --radius-xl:22px;
        color-scheme: only light;
      }

      *{ box-sizing:border-box }
      html,body{ height:100% }
      body{
        margin:0;
        font-family:Inter,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
        color:var(--text);
        background:var(--bg);
        -webkit-font-smoothing:antialiased;
        background-image:
          radial-gradient(1200px 500px at 10% -10%, rgba(255,147,30,.06), transparent 60%),
          radial-gradient(900px 400px at 90% 0%, rgba(255,147,30,.04), transparent 60%);
      }

      .container{ max-width:880px; margin:0 auto; padding: clamp(16px,3vw,28px) clamp(16px,4vw,32px); }

      .hero{
        display:grid; place-items:center; text-align:center; margin: max(10px,env(safe-area-inset-top)) 0 18px;
      }
      .logo-wrap{
        width: clamp(84px, 12vw, 140px);
        height: clamp(84px, 12vw, 140px);
        border-radius: 28px;
        background: radial-gradient(140% 140% at 20% 10%, rgba(255,147,30,.25), rgba(255,147,30,.05));
        display:grid; place-items:center;
        border:1px solid var(--border);
        box-shadow:var(--elev);
        margin-bottom:12px;
      }
      .logo{ width:78%; height:78%; object-fit:contain; border-radius:16px }
      .hero h1{ font-size: clamp(22px, 3.6vw, 34px); margin:6px 0 6px }
      .hero p{ margin:0; color:var(--muted); font-size: clamp(13px,1.8vw,15px) }

      .card{
        background:var(--surface);
        border:1px solid var(--border);
        border-radius:var(--radius-xl);
        box-shadow:var(--elev);
        overflow:hidden;
        padding: clamp(16px,2.8vw,24px);
      }

      .ok{
        color:#065f46;
        background:#d1fae5;
        border:1px solid #a7f3d0;
        padding:10px 14px;
        border-radius:14px;
        font-weight:700;
        margin-bottom:14px;
        text-align:center;
      }

      .row{ display:grid; gap:10px; margin-top:10px; justify-items:center; }
      .pill{
        display:inline-flex;
        align-items:center;
        gap:8px;
        padding:10px 14px;
        border:1px solid var(--border);
        border-radius:999px;
        background: rgba(255,147,30,.08);
        font-weight:700;
        font-size:14px;
      }

      .note{ font-size:13px; color:var(--muted); margin-top:10px; text-align:center; }

      .btn{
        display:inline-flex; align-items:center; justify-content:center;
        background:var(--accent);
        color:var(--accent-ink);
        border:none;
        border-radius:16px;
        padding:14px 18px;
        cursor:pointer;
        font-weight:900;
        font-size:15px;
        width:100%;
        min-height:52px;
        box-shadow:0 10px 24px rgba(255,147,30,.35);
        transition:.15s transform,.15s box-shadow;
        margin-top:12px;
      }
      .btn:hover{ transform:translateY(-1px); box-shadow:0 14px 28px rgba(255,147,30,.42); }
      .btn.ghost{ background:transparent; color:var(--text); border:1.5px solid var(--border); box-shadow:none; }

      footer{
        text-align:center;
        margin: 28px 0 calc(14px + env(safe-area-inset-bottom));
        font-size:12px;
        color:var(--muted);
      }
    </style>
  </head>

  <body>
    <div class="container">
      <header class="hero" aria-label="Repisas Don Maxi">
        <div class="logo-wrap" aria-hidden="true">
          <img class="logo" src="/logo.png" alt="Logo Repisas Don Maxi" />
        </div>
        <h1>Visita agendada</h1>
        <p>Gracias por coordinar con Repisas Don Maxi</p>
      </header>

      <main class="card">
        <div class="ok" id="ok-msg" role="status" aria-live="polite">
          ‚úÖ ¬°Tu visita fue agendada exitosamente!
        </div>

        <div class="row">
          <div class="pill" id="pill-fecha">üìÖ Fecha: ‚Äî</div>
          <div class="pill" id="pill-hora">‚è∞ Hora: ‚Äî</div>
          <div class="pill" id="pill-email">‚úâÔ∏è Confirmaci√≥n enviada a: ‚Äî</div>
        </div>

        <p class="note">
          Un especialista asistir√° para tomar medidas y coticemos tus repisas de madera a medida.
          La visita tiene una duraci√≥n estimada de <strong>15 minutos</strong>.
        </p>

        <button class="btn ghost" id="btn-volver" type="button" aria-label="Volver al inicio">
          Volver al inicio
        </button>
      </main>

      <footer>¬© <span id="year"></span> Repisas Don Maxi ‚Äî Todos los derechos reservados</footer>
    </div>

    <script>
      // A√±o
      document.getElementById('year').textContent = new Date().getFullYear()

      // Par√°metros ?date=YYYY-MM-DD&time=HH:mm&email=...
      const params = new URLSearchParams(location.search)
      const dateISO = params.get('date') || ''
      const timeHHmm = params.get('time') || ''
      const email = params.get('email') || ''

      // Validaciones y formateos
      function isValidDateISO(s){ return /^\d{4}-\d{2}-\d{2}$/.test(s) }
      function parseLocalDate(iso){
        const [y,m,d]=iso.split('-').map(Number)
        return new Date(y,(m??1)-1,d??1)
      }
      function prettyDate(date){
        try{
          return new Intl.DateTimeFormat('es-CL',{dateStyle:'full'}).format(date)
        }catch{
          return date.toISOString().slice(0,10)
        }
      }
      function isValidTime(s){ return /^\d{2}:\d{2}$/.test(s) }

      const fechaTxt = isValidDateISO(dateISO) ? prettyDate(parseLocalDate(dateISO)) : '‚Äî'
      const horaTxt  = isValidTime(timeHHmm) ? timeHHmm : '‚Äî'
      const mailTxt  = email || '‚Äî'

      document.getElementById('pill-fecha').textContent = `üìÖ Fecha: ${fechaTxt}`
      document.getElementById('pill-hora').textContent  = `‚è∞ Hora: ${horaTxt}`
      document.getElementById('pill-email').textContent = `‚úâÔ∏è Confirmaci√≥n enviada a: ${mailTxt}`

      // Volver al inicio
      document.getElementById('btn-volver').addEventListener('click', () => {
        window.location.href = '/'
      })
    </script>
  </body>
</html>
